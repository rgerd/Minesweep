function initSocket(){socket=io(),info={name:Math.floor(1028*Math.random()).toString(16),color:"rgb("+Math.floor(200*Math.random())+", "+Math.floor(200*Math.random())+", "+Math.floor(255*Math.random())+")",x:Math.floor(200*Math.random())+100,y:Math.floor(200*Math.random())+100},socket.on("connect",function(){socket.emit("client_info",info)}),socket.on("client_info_final",function(a){info=a,createBox(info,!0)}),socket.on("person_connect",function(a){createBox(a)}),socket.on("person_disconnect",function(a){removeBox(a.name)}),socket.on("server_message",function(a){console.log("Server message: "+a.msg)}),socket.on("user_count",function(a){document.getElementById("users_online").innerHTML=".:. "+a.numUsers+(1==a.numUsers?" PLAYER ":" PLAYERS ")+"ONLINE .:."}),socket.on("update",function(a){try{document.getElementById(a.name).style.left=a.x+"px",document.getElementById(a.name).style.top=a.y+"px"}catch(b){}}),socket.on("force_update",function(a){socket.emit("update",{name:info.name,x:info.x,y:info.y})})}function tick(){requestAnimationFrame(tick)}function createBox(a,b){b=1==b;var c=document.createElement("div");c.style.position="absolute",c.style.width="50px",c.style.height="50px",c.style.backgroundColor=a.color,c.style.marginTop="-25px",c.style.marginLeft="-25px",c.style.cursor="none",c.style.left=a.x+"px",c.style.top=a.y+"px",b?c.id="user":c.id=a.name,c["class"]="box",document.body.appendChild(c)}function removeBox(a){document.body.removeChild(document.getElementById(a))}var socket,info;window.addEventListener("mousemove",function(a){lastinfo={x:info.x,y:info.y},info.x=a.clientX,info.y=a.clientY;var b=document.getElementById("user");b&&(b.style.left=info.x+"px",b.style.top=info.y+"px",socket.emit("update",{name:info.name,x:info.x,y:info.y})),document.getElementById("title").style.color="rgb("+255*Math.random()+", "+255*Math.random()+", "+255*Math.random()+")"}),window.onload=function(){initSocket(),tick()};